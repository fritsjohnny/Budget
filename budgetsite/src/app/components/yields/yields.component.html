<div class="">
    <div class="cancel">
        <button
            class="default-button"
            mat-mini-fab
            matTooltip="Cancelar"
            color="accent"
            aria-label="Cancelar"
            (click)="cancel()"
        >
            <mat-icon class="default-icon">close</mat-icon>
        </button>
    </div>

    <h2 mat-dialog-title>{{ data.title }}</h2>
    <div mat-dialog-content>
        <!-- Table -->
        <div class="row center mt-2">
            <div class="mytable">
                <div class="table-container mat-elevation-z8">
                    <table
                        mat-table
                        [dataSource]="dataSource"
                        [multiTemplateDataRows]="true"
                    >
                        <!-- # Column -->
                        <ng-container matColumnDef="index">
                            <th mat-header-cell *matHeaderCellDef>#</th>
                            <td
                                mat-cell
                                *matCellDef="let row; let i = index"
                                [ngClass]="'yield'"
                            >
                                {{ row.rowNum }}
                            </td>
                            <td
                                mat-footer-cell
                                *matFooterCellDef
                                [ngStyle]="{
                                    color: total < 0 ? 'negative' : 'positive'
                                }"
                            >
                                Total
                            </td>
                        </ng-container>

                        <!-- Data Column -->
                        <ng-container matColumnDef="date">
                            <th mat-header-cell *matHeaderCellDef>Data</th>
                            <td
                                mat-cell
                                *matCellDef="let row"
                                [ngClass]="'yield'"
                            >
                                {{ row.date | date: "dd/MM" }}
                            </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <!-- Conta Column -->
                        <ng-container matColumnDef="account">
                            <th mat-header-cell *matHeaderCellDef>Conta</th>
                            <td mat-cell *matCellDef="let row">
                                <span
                                    class="card-detail"
                                    [ngStyle]="{
                                        backgroundColor: row.background,
                                        color: row.color,
                                        whiteSpace: 'nowrap'
                                    }"
                                >
                                    {{ row.account }}
                                </span>
                            </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <!-- Valor Column -->
                        <ng-container matColumnDef="amount">
                            <th mat-header-cell *matHeaderCellDef>Valor</th>
                            <td
                                mat-cell
                                *matCellDef="let row"
                                [ngClass]="'yield'"
                            >
                                {{ row.amount | currency: "" : "" }}
                            </td>
                            <td
                                mat-footer-cell
                                *matFooterCellDef
                                [ngClass]="total < 0 ? 'negative' : 'positive'"
                            >
                                {{ total | currency: "" : "" }}
                            </td>
                        </ng-container>

                        <!-- Running Column -->
                        <ng-container matColumnDef="runningTotal">
                            <th mat-header-cell *matHeaderCellDef>Saldo</th>
                            <td
                                mat-cell
                                *matCellDef="let row"
                                [ngClass]="
                                    row.runningTotal < 0
                                        ? 'negative'
                                        : 'positive'
                                "
                                style="padding-left: 15px"
                            >
                                {{ row.runningTotal | currency: "" : "" }}
                            </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <!-- Linha de SUBTOTAL -->
                        <ng-container matColumnDef="subtotalLabel">
                            <td
                                mat-cell
                                *matCellDef="let row"
                                class="subtotal-label"
                                [attr.colspan]="3"
                            >
                                <b>Total dia {{ row.date | date: "dd/MM" }}</b>
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="subtotalAmount">
                            <td
                                mat-cell
                                *matCellDef="let row"
                                class="subtotal-amount"
                            >
                                <b>{{ row.dayTotal | currency: "" : "" }}</b>
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="subtotalEmpty">
                            <td
                                mat-cell
                                *matCellDef="let row"
                                class="subtotal-empty"
                            ></td>
                        </ng-container>

                        <tr
                            mat-header-row
                            *matHeaderRowDef="displayedColumns; sticky: true"
                        ></tr>
                        <tr
                            mat-row
                            *matRowDef="let row; columns: displayedColumns"
                        ></tr>
                        <!-- Linha de subtotal (aparece sÃ³ quando muda o dia) -->
                        <tr
                            mat-row
                            *matRowDef="
                                let row;
                                columns: subtotalColumns;
                                when: isEndOfDay
                            "
                        ></tr>
                        <tr
                            mat-footer-row
                            *matFooterRowDef="displayedColumns; sticky: true"
                        ></tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="row" style="margin-bottom: 5px; align-items: center">
        <p></p>
        <div class="col-4">
            <span class="min-yield-label">Menor rendimento:</span>
        </div>
        <div class="col-2">
            <span class="min-yield">
                <b>{{ minYieldData?.amount | currency: "" : "" }}</b>
            </span>
        </div>
        <div class="col-2">
            <span class="min-yield-date"
                ><i>({{ minYieldData?.date | date: "dd/MM" }})</i></span
            >
        </div>
        <div class="col-4">
            <span
                class="card-detail"
                [ngStyle]="{
                    backgroundColor: minYieldData?.background,
                    color: minYieldData?.color,
                    whiteSpace: 'nowrap'
                }"
            >
                {{ minYieldData?.account }}
            </span>
        </div>
    </div>
    <div class="row" style="align-items: center">
        <div></div>
        <div class="col-4">
            <span class="min-yield-label">Maior rendimento:</span>
        </div>
        <div class="col-2">
            <span class="max-yield">
                <b>{{ maxYieldData?.amount | currency: "" : "" }}</b>
            </span>
        </div>
        <div class="col-2">
            <span class="max-yield-date"
                ><i>({{ maxYieldData?.date | date: "dd/MM" }})</i></span
            >
        </div>
        <div class="col-4">
            <span
                class="card-detail"
                [ngStyle]="{
                    backgroundColor: maxYieldData?.background,
                    color: maxYieldData?.color,
                    whiteSpace: 'nowrap'
                }"
            >
                {{ maxYieldData?.account }}
            </span>
        </div>
    </div>
    <div class=""></div>
</div>
